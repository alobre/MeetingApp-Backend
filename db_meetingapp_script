CREATE TABLE users (
  id SERIAL PRIMARY KEY,
  first_name VARCHAR(255) NOT NULL,
  last_name VARCHAR(255) NOT NULL,
  email VARCHAR(255) NOT NULL UNIQUE,
  password VARCHAR(255) NOT NULL
);

CREATE TABLE meeting_series (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id)
);

CREATE TABLE meetings (
  id SERIAL PRIMARY KEY,
  series_id INT NOT NULL REFERENCES meeting_series(id),
  agenda_id INT NOT NULL REFERENCES agendas(id),
  title VARCHAR(255) NOT NULL
);

CREATE TABLE agendas (
  id SERIAL PRIMARY KEY,
  meeting_id INT NOT NULL REFERENCES meetings(id),
  is_finalized BOOLEAN NOT NULL
);

CREATE TABLE action_points (
  id SERIAL PRIMARY KEY,
  agenda_id INT NOT NULL REFERENCES agendas(id),
  date DATE NOT NULL,
  time TIME NOT NULL,
  text VARCHAR(255) NOT NULL
);

CREATE TABLE action_point_subpoints (
  id SERIAL PRIMARY KEY,
  action_point_id INT NOT NULL REFERENCES action_points(id),
  message VARCHAR(255) NOT NULL
);

CREATE TABLE todo (
  id SERIAL PRIMARY KEY,
  subpoint_id INT NOT NULL REFERENCES action_point_subpoints(id),
  user_id INT NOT NULL REFERENCES users(id)
);

CREATE TABLE action_point_comments (
  id SERIAL PRIMARY KEY,
  user_id INT NOT NULL REFERENCES users(id),
  comment_text VARCHAR(255) NOT NULL,
  action_point_id INT NOT NULL REFERENCES action_points(id)
);

CREATE TABLE meeting_members (
  user_id INT NOT NULL REFERENCES users(id),
  meeting_id INT NOT NULL REFERENCES meetings(id),
  edit_agenda BOOLEAN NOT NULL,
  is_owner BOOLEAN NOT NULL,
  PRIMARY KEY (user_id, meeting_id)
);